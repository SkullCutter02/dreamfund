{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport Spinner from \"../components/Spinner\";\nimport modifyBookName from \"../utils/modifyBookName\";\n\nvar AdminPage = function AdminPage() {\n  var _useState = useState(true),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var _useState2 = useState(false),\n      isError = _useState2[0],\n      setIsError = _useState2[1];\n\n  var _useState3 = useState(null),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var _useState4 = useState(null),\n      bookData = _useState4[0],\n      setBookData = _useState4[1];\n\n  useEffect(function () {\n    fetch(\"/api/\").then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      setIsLoading(false);\n      setBookData(data);\n    })[\"catch\"](function (err) {\n      console.log(err);\n      setError(err);\n      setIsError(true);\n    });\n  }, []);\n\n  var countTotal = function countTotal(bookData) {\n    var total = 0;\n    bookData.forEach(function (book) {\n      return total += book.count;\n    });\n    return total;\n  };\n\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [isLoading ? /*#__PURE__*/_jsx(Spinner, {\n      size: 40\n    }) : isError ? /*#__PURE__*/_jsx(\"p\", {\n      className: \"jsx-2950183119\",\n      children: error.message\n    }) : bookData && /*#__PURE__*/_jsxs(\"div\", {\n      className: \"jsx-2950183119\" + \" \" + \"container\",\n      children: [/*#__PURE__*/_jsxs(\"p\", {\n        className: \"jsx-2950183119\",\n        children: [\"Total: \", countTotal(bookData)]\n      }), bookData.map(function (book) {\n        return /*#__PURE__*/_jsx(\"div\", {\n          className: \"jsx-2950183119\" + \" \" + \"book\",\n          children: /*#__PURE__*/_jsx(Link, {\n            href: \"/\".concat(book.book),\n            children: /*#__PURE__*/_jsxs(\"p\", {\n              className: \"jsx-2950183119\",\n              children: [modifyBookName(book.book), \": \", book.count]\n            })\n          })\n        });\n      })]\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"2950183119\",\n      children: [\".container.jsx-2950183119{width:90%;margin:50px auto;}\", \".book.jsx-2950183119{margin-top:10px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;}\", \".book.jsx-2950183119 p.jsx-2950183119{cursor:pointer;}\"]\n    })]\n  });\n};\n\nexport default AdminPage;","map":null,"metadata":{},"sourceType":"module"}