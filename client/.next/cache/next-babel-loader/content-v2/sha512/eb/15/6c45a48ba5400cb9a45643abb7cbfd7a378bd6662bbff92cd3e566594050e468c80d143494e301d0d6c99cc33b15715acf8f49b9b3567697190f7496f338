{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport Spinner from \"../components/Spinner\";\nimport modifyBookName from \"../utils/modifyBookName\";\n\nconst AdminPage = () => {\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(true);\n  const {\n    0: isError,\n    1: setIsError\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const {\n    0: bookData,\n    1: setBookData\n  } = useState(null);\n  useEffect(() => {\n    fetch(\"/api/\").then(res => res.json()).then(data => {\n      setIsLoading(false);\n      setBookData(data);\n    }).catch(err => {\n      console.log(err);\n      setError(err);\n      setIsError(true);\n    });\n  }, []);\n\n  const countTotal = bookData => {\n    let total = 0;\n    bookData.forEach(book => total += book.count);\n    return total;\n  };\n\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [isLoading ? /*#__PURE__*/_jsx(Spinner, {\n      size: 40\n    }) : isError ? /*#__PURE__*/_jsx(\"p\", {\n      className: \"jsx-2950183119\",\n      children: error.message\n    }) : bookData && /*#__PURE__*/_jsxs(\"div\", {\n      className: \"jsx-2950183119\" + \" \" + \"container\",\n      children: [/*#__PURE__*/_jsxs(\"p\", {\n        className: \"jsx-2950183119\",\n        children: [\"Total: \", countTotal(bookData)]\n      }), bookData.map(book => /*#__PURE__*/_jsx(\"div\", {\n        className: \"jsx-2950183119\" + \" \" + \"book\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: `/${book.book}`,\n          children: /*#__PURE__*/_jsxs(\"p\", {\n            className: \"jsx-2950183119\",\n            children: [modifyBookName(book.book), \": \", book.count]\n          })\n        })\n      }))]\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"2950183119\",\n      children: [\".container.jsx-2950183119{width:90%;margin:50px auto;}\", \".book.jsx-2950183119{margin-top:10px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;}\", \".book.jsx-2950183119 p.jsx-2950183119{cursor:pointer;}\"]\n    })]\n  });\n};\n\nexport default AdminPage;","map":null,"metadata":{},"sourceType":"module"}